1. AZ-agent script to install UAT web server
sudo apt-get update;sudo apt-get install git;sudo mkdir -p /opt/data/azagent;cd /opt/data/azagent;sudo sh -c "curl -fkSL -o vstsagent.tar.gz https://vstsagentpackage.azureedge.net/agent/2.181.2/vsts-agent-linux-x64-2.181.2.tar.gz;tar -zxvf vstsagent.tar.gz;";sudo chmod -R 777 /opt/data/azagent;./config.sh --environment --environmentname "UAT" --acceptteeeula --agent $HOSTNAME --url https://tfs.edftrading.com/tfs --work _work --collectionname 'DefaultCollection' --projectname 'DeepSea' --auth pat --token facy73glfuai4bdaexwi6qtgjonlljqk2d6tjygfzliyuu46sk3a --runasservice --addvirtualmachineresourcetags --virtualmachineresourcetags compass --unattended;sudo ./svc.sh install root; sudo ./svc.sh start; sudo chmod -R 755 /opt/data/azagent;

somehow connection failed when running this.  

sudo apt-get update;sudo apt-get install git;sudo mkdir /opt/data/azagent;cd /opt/data/azagent;sudo sh -c "curl -fkSL -o vstsagent.tar.gz https://vstsagentpackage.azureedge.net/agent/2.181.2/vsts-agent-linux-x64-2.181.2.tar.gz;tar -zxvf vstsagent.tar.gz;";sudo chmod -R 777 /opt/data/azagent;./config.sh --environment --environmentname "UAT" --acceptteeeula --agent $HOSTNAME --url https://tfs.edftrading.com/tfs --work _work --collectionname 'DefaultCollection' --projectname 'DeepSea' --auth pat --token facy73glfuai4bdaexwi6qtgjonlljqk2d6tjygfzliyuu46sk3a --runasservice --addvirtualmachineresourcetags --virtualmachineresourcetags compass --unattended;sudo ./svc.sh install root; sudo ./svc.sh start; sudo chmod -R 755 /opt/data/azagent;

ran this command (should be the same as 1st) and connected to uat.

2. AZ-agent to install UAT OpenSearch server - similar command but different tags
sudo apt-get update;sudo apt-get install git;sudo mkdir -p /opt/data/azagent;cd /opt/data/azagent;sudo sh -c "curl -fkSL -o vstsagent.tar.gz https://vstsagentpackage.azureedge.net/agent/2.181.2/vsts-agent-linux-x64-2.181.2.tar.gz;tar -zxvf vstsagent.tar.gz;";sudo chmod -R 777 /opt/data/azagent;./config.sh --environment --environmentname "UAT" --acceptteeeula --agent $HOSTNAME --url https://tfs.edftrading.com/tfs --work _work --collectionname 'DefaultCollection' --projectname 'DeepSea' --auth pat --token facy73glfuai4bdaexwi6qtgjonlljqk2d6tjygfzliyuu46sk3a --runasservice --addvirtualmachineresourcetags --virtualmachineresourcetags docker,opensearch --unattended;sudo ./svc.sh install root; sudo ./svc.sh start; sudo chmod -R 755 /opt/data/azagent;